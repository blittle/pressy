Implement the following plan:

# Add PWA Install Button to Home Page

## Context

The home page has a "Start Reading" / "Continue Reading" CTA button. The user wants an "Install" button next to it that triggers the browser's PWA install prompt, so visitors can install the book as an app directly from the landing page.

## How `beforeinstallprompt` Works

The browser fires `beforeinstallprompt` when the site meets PWA installability criteria (manifest, service worker, HTTPS). We must:
1. Capture the event and call `preventDefault()` to stop the browser's default mini-infobar
2. Stash the event in a signal so the UI can show/hide an install button
3. When the user clicks "Install", call `event.prompt()` to show the native install dialog
4. After the user responds, clear the stashed event
5. Listen for `appinstalled` to hide the button if installed via other means

## Files to Modify

| File | Changes |
|------|---------|
| `packages/pressy/src/runtime/offline.ts` | Add `installPrompt` signal + `setupInstallPrompt()` + `triggerInstall()` |
| `packages/pressy/src/runtime/client.tsx` | Add `InstallButton` component, call `setupInstallPrompt()` in `hydrate()`, render button next to `StartReadingCTA` |

## Implementation

### 1. Add install prompt signal and helpers (`offline.ts`)

Add at the top alongside existing signals:

```ts
export const installPrompt = signal<Event | null>(null)
```

Add a setup function:

```ts
export function setupInstallPrompt(): void {
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault()
    installPrompt.value = e
  })
  window.addEventListener('appinstalled', () => {
    installPrompt.value = null
  })
}
```

Add a trigger function:

```ts
export async function triggerInstall(): Promise<boolean> {
  const prompt = installPrompt.value as any
  if (!prompt) return false
  prompt.prompt()
  const { outcome } = await prompt.userChoice
  installPrompt.value = null
  return outcome === 'accepted'
}
```

### 2. Add `InstallButton` component and integrate (`client.tsx`)

Import `installPrompt`, `setupInstallPrompt`, `triggerInstall` from offline.ts.

Call `setupInstallPrompt()` in `hydrate()` alongside the existing `setupOfflineDetection()`.

Create a simple component:

```tsx
function InstallButton() {
  // Reading .value auto-subscribes — button only shows when prompt is available
  if (!installPrompt.value) return null

  return (
    <button
      class="pressy-cta pressy-cta-secondary"
      onClick={() => triggerInstall()}
    >
      Install
    </button>
  )
}
```

In `renderBookPage()`, wrap both CTAs in a flex container:

```tsx
{chapterCount > 0 && (
  <div class="pressy-cta-group">
    <StartReadingCTA book={book} />
    <InstallButton />
  </div>
)}
```

Add styles to `HOME_STYLES`:

```css
.pressy-cta-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  align-items: center;
}
.pressy-cta-secondary {
  background: transparent;
  color: var(--color-link, #2563eb);
  border: 1.5px solid var(--color-link, #2563eb);
  cursor: pointer;
  font-family: inherit;
}
.pressy-cta-secondary:hover {
  background: var(--color-link, #2563eb);
  color: #fff;
}
```

The secondary/outline style differentiates it from the primary "Start Reading" button.

## Verification

1. `pnpm --filter pressy build` — no errors
2. Home page in Chrome: "Install" button appears next to "Start Reading" (only when browser supports PWA install)
3. Click "Install" — native browser install dialog appears
4. After installing (or dismissing), the "Install" button disappears
5. If already installed or browser doesn't support PWA, button is hidden
6. Button styling: outline style, responsive wrapping on mobile


If you need specific details from before exiting plan mode (like exact code snippets, error messages, or content you generated), read the full transcript at: /Users/blittle/.REDACTED.jsonl

---

Could we automatically download for offline usage if the user installs the app? So they don't have to click the icon in the footer?

---

Could we add to the top of the table of contents a link to the home page?

---

Did we break something on mobile for displaying the bottom footer on tap? I don't see anything showing up anymore on tap, `class="pressy-page-footer pressy-page-footer--visible"` properly gets set, but I don't see the actual content of the footer.

---

If I set the CSS manually in the browser to:

```
.pressy-page-footer--visible {
    transform: translateY(-58px);
    opacity: 1;
}
```

It does show up, but that breaks desktop