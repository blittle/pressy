Implement the following plan:

# Settings Dialog in Reader Footer

## Context

The reader footer (shown on tap/hover) currently only has a progress bar. The user wants a settings button below the progress bar that opens a dialog for adjusting font size and theme (Light, Dark, System, Sepia).

## Files to Modify

| File | Change |
|------|--------|
| `packages/@pressy/components/src/Reader.tsx` | Settings button in footer, settings panel UI, font size + theme state |
| `packages/pressy/src/runtime/client.tsx` | Update `setTheme()`/`loadTheme()` to support `"system"` value |

## Existing Patterns to Reuse

- **Theme switching**: `data-theme` attr on `<html>` + `localStorage('pressy-theme')` ‚Äî `client.tsx:120-133`
- **Theme CSS**: `light.css`, `dark.css`, `sepia.css` in `@pressy/typography/src/themes/`
- **Font size base**: `--font-size-base` in `fluid.css`, applied via `html { font-size: var(--font-size-base) }`

## Implementation

### Step 1: Pass book title through to Reader (`client.tsx`)

- Add `bookTitle` prop to `ReaderProps` and `PaginatedReaderProps`
- In `ChapterReaderWithProgress`, pass `bookTitle={book.metadata.title}`
- Already available: `book.metadata.title` at `client.tsx:417`

### Step 2: "System" theme support (`client.tsx`)

- `setTheme('system')` stores `"system"` in localStorage, then resolves to `"light"` or `"dark"` via `prefers-color-scheme` and applies that to `data-theme`
- Add a `matchMedia('(prefers-color-scheme: dark)')` change listener so theme updates live when OS preference changes

### Step 3: Settings panel in `Reader.tsx`

**Footer layout** ‚Äî below the progress bar, a row with the book title on the left and a gear icon on the right:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë progress ‚îÇ
‚îÇ Flatland              ‚öô     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

The book title is passed as a prop (already available as `bookTitle` from the hydrate data). Tapping the gear opens a panel that slides up from the footer.

**Theme section** ‚Äî 4 option buttons in a row, each with a small SVG icon + label:
- Light (sun) ¬∑ Dark (moon) ¬∑ System (monitor) ¬∑ Sepia (book-open)
- Active option gets highlighted border. Calls existing `setTheme()` pattern.

**Font size section** ‚Äî `[A-]  100%  [A+]` row:
- Stored in `localStorage('pressy-font-size')` as a multiplier (e.g. `"1.1"`)
- Applied via `document.documentElement.style.setProperty('--font-size-base', computed)`
- Range: 0.8x to 1.5x in 0.1 steps, default 1.0x (no override)
- After change, call `recalculatePages()` since column layout changes

**Closing**: tapping gear again or tapping outside the panel closes it. The container click handler skips page turns when the settings panel is open (check if click target is inside `.pressy-settings-panel`).

### Step 4: Font size persistence

- On PaginatedReader mount, read `pressy-font-size` from localStorage and apply
- After changing font size, save to localStorage and recalculate pages (small delay for reflow)

### Step 5: Styles in `PAGINATED_STYLES`

Settings panel:
- Positioned absolutely above footer, full width
- `var(--color-bg)` background, border-top, subtle box-shadow
- Compact padding, works well on mobile
- Slide-up/down via `transform: translateY` + `opacity` transition (same pattern as footer)
- Theme buttons: small rounded pills with icon + text, grid/flex row
- Font size buttons: circular `-`/`+` with percentage label between

## Verification

1. `pnpm --filter @pressy/components build` ‚Äî no errors
2. Dev server ‚Äî tap middle of page, footer with gear icon appears
3. Tap gear ‚Üí settings panel slides up
4. Change theme ‚Üí immediate switch, persists on reload
5. Select "System" ‚Üí follows OS preference, updates live on OS theme change
6. Adjust font size ‚Üí text reflows, page count recalculates, persists on reload
7. Tap outside panel ‚Üí closes
8. Page turn taps still work when panel is closed


If you need specific details from before exiting plan mode (like exact code snippets, error messages, or content you generated), read the full transcript at: /Users/blittle/.claude/projects/-Users-blittle-dev-pressy/004407cd-4bb6-40a4-9ab1-445b085e4dfe.jsonl

---

Could we actually implement the different themes?

---

Could you reduce the padding at the top of the page a bit from the header/title?

---

Can you add a readme for the project?

---

git s

---

[Request interrupted by user]

---

Could you help me publish this to npm?

---

Okay I logged in. Can you setup a script for publishing everything in the proper order?

---

Publish failed with this error:

‚îî‚îÄ Done in 3.2s
npm notice
npm notice üì¶  @pressy/components@0.1.0
npm notice Tarball Contents
npm notice 1.3kB dist/content/index.d.ts
npm notice 10.1kB dist/content/index.js
npm notice 14.6kB dist/content/index.js.map
npm notice 4.2kB dist/index.d.ts
npm notice 94.4kB dist/index.js
npm notice 149.1kB dist/index.js.map
npm notice 899B package.json
npm notice Tarball Details
npm notice name: @pressy/components
npm notice version: 0.1.0
npm notice filename: pressy-components-0.1.0.tgz
npm notice package size: 57.4 kB
npm notice unpacked size: 274.6 kB
npm notice shasum: 69d92d820cfceac0a99ebb0a31d183d34969a44e
npm notice integrity: sha512-ngUI555K9xTgy[...]Jr77381yAt++g==
npm notice total files: 7
npm notice
npm notice Publishing to https://registry.npmjs.org/ with tag latest and public access
npm notice Access token expired or revoked. Please try logging in again.
npm error code E404
npm error 404 Not Found - PUT https://registry.npmjs.org/@pressy%2fcomponents - Not found
npm error 404
npm error'@pressy/components@0.1.0' is not in this registry.
npm error 404
npm error 404 Note that you can also install from a
npm error 404 tarball, folder, http url, or git url.
npm error A complete log of this run can be found in: /Users/blittle/.npm/_logs/2026-02-15T21_18_35_338Z-debug-0.log
‚ÄâELIFECYCLE‚Äâ Command failed with exit code 1.

---

The org isn't available. What should I consider instead?

---

[Request interrupted by user for tool use]

---

I setup the org pressy-pub

---

This seems to have broken the local flatland example build:

x Build failed in 114ms
node:internal/process/promises:394
    triggerUncaughtException(err, true /* fromPromise */);
    ^

[vite]: Rollup failed to resolve import "@pressy-pub/shopify" from "/Users/blittle/dev/pressy/packages/@pressy/components/dist/index.js".
This is most likely unintended because it can break your application at runtime.
If you do want to externalize this module explicitly add it to
`build.rollupOptions.external`
    at viteWarn (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:65855:17)
    at onRollupWarning (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:65887:5)
    at onwarn (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:65550:7)
    at file:///Users/blittle/dev/pressy/node_modules/.pnpm/rollup@4.57.1/node_modules/rollup/dist/es/shared/node-entry.js:20972:13
    at Object.logger [as onLog] (file:///Users/blittle/dev/pressy/node_modules/.pnpm/rollup@4.57.1/node_modules/rollup/dist/es/shared/node-entry.js:22945:9)
    at ModuleLoader.handleInvalidResolvedId (file:///Users/blittle/dev/pressy/node_modules/.pnpm/rollup@4.57.1/node_modules/rollup/dist/es/shared/node-entry.js:21689:26)
    at ModuleLoader.resolveDynamicImport (file:///Users/blittle/dev/pressy/node_modules/.pnpm/rollup@4.57.1/node_modules/rollup/dist/es/shared/node-entry.js:21747:58)
    at async file:///Users/blittle/dev/pressy/node_modules/.pnpm/rollup@4.57.1/node_modules/rollup/dist/es/shared/node-entry.js:21631:32 {
  watchFiles: [
    'package.json',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/package.json',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/src/prose.css',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/src/fluid.css',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/src/themes/dark.css',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/src/themes/sepia.css',
    '/Users/blittle/dev/pressy/packages/@pressy/typography/src/themes/light.css',
    '/Users/blittle/dev/pressy/packages/pressy/dist/runtime/client.js',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/00-preface.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/01-of-the-nature-of-flatland.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/02-of-the-climate-and-houses.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/04-concerning-the-women.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/03-concerning-the-inhabitants.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/06-of-recognition-by-sight.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/05-of-our-methods-of-recognizing.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/books/flatland/07-concerning-a-stranger.mdx',
    '/Users/blittle/dev/pressy/examples/flatland/content/articles/about-flatland/index.mdx',
    '/Users/blittle/dev/pressy/packages/pressy/package.json',
    '/Users/blittle/dev/pressy/packages/@pressy/components/package.json',
    '/Users/blittle/dev/pressy/node_modules/.pnpm/@preact+signals@1.3.4_preact@10.28.3/node_modules/@preact/signals/dist/signals.module.js',
    '/Users/blittle/dev/pressy/node_modules/.pnpm/preact@10.28.3/node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js',
    '/Users/blittle/dev/pressy/packages/@pressy/components/dist/content/index.js',
    '/Users/blittle/dev/pressy/node_modules/.pnpm/preact@10.28.3/node_modules/preact/dist/preact.module.js',
    '/Users/blittle/dev/pressy/packages/@pressy/components/dist/index.js',
    '/Users/blittle/dev/pressy/node_modules/.pnpm/preact@10.28.3/node_modules/preact/hooks/dist/hooks.module.js'
  ]
}

Node.js v22.20.0
/Users/blittle/dev/pressy/examples/flatland:

---

Running the dev server of the flatland example breaks with:

4:29:44 PM [vite] Internal server error: Failed to resolve import "@pressy-pub/shopify" from "../../packages/@pressy/components/dist/index.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/blittle/dev/pressy/packages/@pressy/components/dist/index.js:83:46
  2003|      isLoading.value = true;
  2004|      try {
  2005|        const { createCheckout } = await import("@pressy-pub/shopify");
     |                                                ^
  2006|        const checkoutUrl = await createCheckout(shopifyProductId);
  2007|        window.location.href = checkoutUrl;
      at TransformPluginContext._formatError (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:49258:41)
      at TransformPluginContext.error (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:49253:16)
      at normalizeUrl (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:64307:23)
      at async file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:64439:39
      at async Promise.all (index 12)
      at async TransformPluginContext.transform (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:64366:7)
      at async PluginContainer.transform (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:49099:18)
      at async loadAndTransform (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:51978:27)
      at async viteTransformMiddleware (file:///Users/blittle/dev/pressy/node_modules/.pnpm/vite@5.4.21_@types+node@20.19.33/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:62106:24)

---

[Request interrupted by user for tool use]

---

Update the readme with instructions about the new npm package